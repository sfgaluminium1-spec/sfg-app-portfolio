"use strict";exports.id=4311,exports.ids=[4311],exports.modules={44311:(e,r,o)=>{let t,i;o.r(r),o.d(r,{apps:()=>K,default:()=>q,openApp:()=>z});var a=o(97742),n=o(72254),s=o(49411),l=o(41041),c=o(47261),p=o(17718),m=o(93977),f=o(70612),d=o(87561);let u=()=>{try{return d.statSync("/run/.containerenv"),!0}catch{return!1}};function w(){return void 0===i&&(i=u()||(void 0===t&&(t=function(){try{return d.statSync("/.dockerenv"),!0}catch{return!1}}()||function(){try{return d.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}()),t)),i}let g=()=>{if("linux"!==a.platform)return!1;if(f.release().toLowerCase().includes("microsoft"))return!w();try{return!!d.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!w()}catch{return!1}},h=a.env.__IS_WSL_TEST__?g:g(),x=(()=>{let e;let r="/mnt/";return async function(){if(e)return e;let o="/etc/wsl.conf",t=!1;try{await m.access(o,m.constants.F_OK),t=!0}catch{}if(!t)return r;let i=await m.readFile(o,{encoding:"utf8"}),a=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return a?e=(e=a.groups.mountPoint.trim()).endsWith("/")?e:`${e}/`:r}})(),y=async()=>{let e=await x();return`${e}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`},v=async()=>h?y():`${a.env.SYSTEMROOT||a.env.windir||String.raw`C:\Windows`}\\System32\\WindowsPowerShell\\v1.0\\powershell.exe`;function S(e,r,o){let t=o=>Object.defineProperty(e,r,{value:o,enumerable:!0,writable:!0});return Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get(){let e=o();return t(e),e},set(e){t(e)}}),e}let b=(0,c.promisify)(p.execFile);async function E(){if("darwin"!==a.platform)throw Error("macOS only");let{stdout:e}=await b("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]),r=/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(e);return r?.groups.id??"com.apple.Safari"}let P=(0,c.promisify)(p.execFile);async function A(e,{humanReadableOutput:r=!0,signal:o}={}){if("darwin"!==a.platform)throw Error("macOS only");let t={};o&&(t.signal=o);let{stdout:i}=await P("osascript",["-e",e,r?[]:["-ss"]],t);return i.trim()}async function B(e){return A(`tell application "Finder" to set app_path to application file id "${e}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}let F=(0,c.promisify)(p.execFile),C={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}};class L extends Error{}async function T(e=F){let{stdout:r}=await e("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),o=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(r);if(!o)throw new L(`Cannot find Windows browser in stdout: ${JSON.stringify(r)}`);let{id:t}=o.groups,i=C[t];if(!i)throw new L(`Unknown browser ID: ${t}`);return i}let M=(0,c.promisify)(p.execFile),H=e=>e.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase());async function U(){if("darwin"===a.platform){let e=await E();return{name:await B(e),id:e}}if("linux"===a.platform){let{stdout:e}=await M("xdg-mime",["query","default","x-scheme-handler/http"]),r=e.trim();return{name:H(r.replace(/.desktop$/,"").replace("-"," ")),id:r}}if("win32"===a.platform)return T();throw Error("Only macOS, Linux, and Windows are supported")}let $=(0,c.promisify)(p.execFile),_=s.dirname((0,l.fileURLToPath)("file:///opt/hostedapp/node/root/app/node_modules/open/index.js")),I=s.join(_,"xdg-open"),{platform:k,arch:O}=a;async function R(){let e=await v(),r=String.raw`(Get-ItemProperty -Path "HKCU:\Software\Microsoft\Windows\Shell\Associations\UrlAssociations\http\UserChoice").ProgId`,o=n.Buffer.from(r,"utf16le").toString("base64"),{stdout:t}=await $(e,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",o],{encoding:"utf8"}),i=t.trim(),a={ChromeHTML:"com.google.chrome",BraveHTML:"com.brave.Browser",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return a[i]?{id:a[i]}:{}}let W=async(e,r)=>{let o;for(let t of e)try{return await r(t)}catch(e){o=e}throw o},N=async e=>{let r;if(Array.isArray((e={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...e}).app))return W(e.app,r=>N({...e,app:r}));let{name:o,arguments:t=[]}=e.app??{};if(t=[...t],Array.isArray(o))return W(o,r=>N({...e,app:{name:r,arguments:t}}));if("browser"===o||"browserPrivate"===o){let r={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","com.brave.Browser":"brave","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},i=h?await R():await U();if(i.id in r){let a=r[i.id];return"browserPrivate"===o&&t.push({chrome:"--incognito",brave:"--incognito",firefox:"--private-window",edge:"--inPrivate"}[a]),N({...e,app:{name:K[a],arguments:t}})}throw Error(`${i.name} is not supported as a default browser`)}let i=[],s={};if("darwin"===k)r="open",e.wait&&i.push("--wait-apps"),e.background&&i.push("--background"),e.newInstance&&i.push("--new"),o&&i.push("-a",o);else if("win32"!==k&&(!h||w()||o)){if(o)r=o;else{let e=!1;try{await m.access(I,m.constants.X_OK),e=!0}catch{}r=a.versions.electron??("android"===k||!_||"/"===_||!e)?"xdg-open":I}t.length>0&&i.push(...t),e.wait||(s.stdio="ignore",s.detached=!0)}else{r=await v(),i.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),h||(s.windowsVerbatimArguments=!0);let a=["Start"];e.wait&&a.push("-Wait"),o?(a.push(`"\`"${o}\`""`),e.target&&t.push(e.target)):e.target&&a.push(`"${e.target}"`),t.length>0&&a.push("-ArgumentList",(t=t.map(e=>`"\`"${e}\`""`)).join(",")),e.target=n.Buffer.from(a.join(" "),"utf16le").toString("base64")}"darwin"===k&&t.length>0&&i.push("--args",...t),e.target&&i.push(e.target);let l=p.spawn(r,i,s);return e.wait?new Promise((r,o)=>{l.once("error",o),l.once("close",t=>{if(!e.allowNonzeroExitCode&&t>0){o(Error(`Exited with code ${t}`));return}r(l)})}):(l.unref(),l)},z=(e,r)=>{if("string"!=typeof e&&!Array.isArray(e))throw TypeError("Expected a valid `name`");let{arguments:o=[]}=r??{};if(null!=o&&!Array.isArray(o))throw TypeError("Expected `appArguments` as Array type");return N({...r,app:{name:e,arguments:o}})};function j(e){if("string"==typeof e||Array.isArray(e))return e;let{[O]:r}=e;if(!r)throw Error(`${O} is not supported`);return r}function G({[k]:e},{wsl:r}){if(r&&h)return j(r);if(!e)throw Error(`${k} is not supported`);return j(e)}let K={};S(K,"chrome",()=>G({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}})),S(K,"brave",()=>G({darwin:"brave browser",win32:"brave",linux:["brave-browser","brave"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/BraveSoftware/Brave-Browser/Application/brave.exe",x64:["/mnt/c/Program Files/BraveSoftware/Brave-Browser/Application/brave.exe","/mnt/c/Program Files (x86)/BraveSoftware/Brave-Browser/Application/brave.exe"]}})),S(K,"firefox",()=>G({darwin:"firefox",win32:String.raw`C:\Program Files\Mozilla Firefox\firefox.exe`,linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"})),S(K,"edge",()=>G({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"})),S(K,"browser",()=>"browser"),S(K,"browserPrivate",()=>"browserPrivate");let q=(e,r)=>{if("string"!=typeof e)throw TypeError("Expected a `target`");return N({...r,target:e})}}};