"use strict";(()=>{var e={};e.id=3211,e.ids=[3211],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},8024:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>b,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g});var r={};o.r(r),o.d(r,{GET:()=>h,POST:()=>c,dynamic:()=>p});var s=o(79182),n=o(72007),i=o(56719),a=o(93442),u=o(84770),l=o.n(u);let p="force-dynamic";async function c(e){try{let t=await e.text(),o=e.headers.get("x-hub-signature-256"),r=e.headers.get("x-github-event"),s=process.env.GITHUB_WEBHOOK_SECRET||"TEMP_SECRET_CHANGE_ME";if(o){let e=l().createHmac("sha256",s),r="sha256="+e.update(t).digest("hex");if(o!==r)return console.error("[GitHub Webhook] Invalid signature"),a.NextResponse.json({error:"Invalid signature"},{status:401})}let n=JSON.parse(t);if(console.log("[GitHub Webhook] Received event:",r),"push"===r){let e=process.env.APP_NAME||"sfg-company-wiki",t=n.commits||[];for(let o of(console.log("[GitHub Webhook] Processing",t.length,"commits"),t)){let t=[...o.added||[],...o.modified||[]],r=`instructions/satellites/${e}.md`;t.includes(r)&&(console.log(`ðŸ”” [GitHub Webhook] New instruction detected in commit ${o.id}`),console.log("[GitHub Webhook] Commit message:",o.message),console.log("[GitHub Webhook] Instruction URL:",o.url),console.log("âš ï¸  [GitHub Webhook] Admin: New instruction available from GitHub!"),console.log("\uD83D\uDCC4 [GitHub Webhook] Review at:",`https://github.com/${n.repository.full_name}/blob/${n.ref.replace("refs/heads/","")}/${r}`))}return a.NextResponse.json({status:"ok",event:"push",commits_processed:t.length,message:"Webhook received and processed"})}if("issues"===r){let e=n.action,t=n.issue;console.log("[GitHub Webhook] Issue event:",e),console.log("[GitHub Webhook] Issue title:",t.title),console.log("[GitHub Webhook] Issue URL:",t.html_url);let o=process.env.APP_NAME||"sfg-company-wiki";return((t.labels||[]).map(e=>e.name).includes(o)||t.title.includes(o))&&(console.log(`ðŸ”” [GitHub Webhook] Issue for ${o} detected`),console.log("âš ï¸  [GitHub Webhook] Admin: New GitHub issue for this app!")),a.NextResponse.json({status:"ok",event:"issues",action:e,message:"Issue webhook received"})}return console.log("[GitHub Webhook] Unhandled event type:",r),a.NextResponse.json({status:"ok",event:r,message:"Webhook received but not processed"})}catch(e){return console.error("[GitHub Webhook] Error processing webhook:",e),a.NextResponse.json({error:"Internal server error",message:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function h(e){return a.NextResponse.json({service:"GitHub Webhook Endpoint",status:"active",app:process.env.APP_NAME||"sfg-company-wiki",endpoint:"/api/github-webhook",supported_events:["push","issues"],message:"Webhook endpoint is ready to receive GitHub events"})}let d=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/github-webhook/route",pathname:"/api/github-webhook",filename:"route",bundlePath:"app/api/github-webhook/route"},resolvedPagePath:"/home/ubuntu/company_wiki/nextjs_space/app/api/github-webhook/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:f}=d,b="/api/github-webhook/route";function v(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}},21666:e=>{var t=Object.defineProperty,o=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,n={};function i(e){var t;let o=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),r=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===o.length?r:`${r}; ${o.join("; ")}`}function a(e){let t=new Map;for(let o of e.split(/; */)){if(!o)continue;let e=o.indexOf("=");if(-1===e){t.set(o,"true");continue}let[r,s]=[o.slice(0,e),o.slice(e+1)];try{t.set(r,decodeURIComponent(null!=s?s:"true"))}catch{}}return t}function u(e){var t,o;if(!e)return;let[[r,s],...n]=a(e),{domain:i,expires:u,httponly:c,maxage:h,path:d,samesite:m,secure:g,partitioned:f,priority:b}=Object.fromEntries(n.map(([e,t])=>[e.toLowerCase(),t]));return function(e){let t={};for(let o in e)e[o]&&(t[o]=e[o]);return t}({name:r,value:decodeURIComponent(s),domain:i,...u&&{expires:new Date(u)},...c&&{httpOnly:!0},..."string"==typeof h&&{maxAge:Number(h)},path:d,...m&&{sameSite:l.includes(t=(t=m).toLowerCase())?t:void 0},...g&&{secure:!0},...b&&{priority:p.includes(o=(o=b).toLowerCase())?o:void 0},...f&&{partitioned:!0}})}((e,o)=>{for(var r in o)t(e,r,{get:o[r],enumerable:!0})})(n,{RequestCookies:()=>c,ResponseCookies:()=>h,parseCookie:()=>a,parseSetCookie:()=>u,stringifyCookie:()=>i}),e.exports=((e,n,i,a)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let i of r(n))s.call(e,i)||void 0===i||t(e,i,{get:()=>n[i],enumerable:!(a=o(n,i))||a.enumerable});return e})(t({},"__esModule",{value:!0}),n);var l=["strict","lax","none"],p=["low","medium","high"],c=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t)for(let[e,o]of a(t))this._parsed.set(e,{name:e,value:o})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let o=Array.from(this._parsed);if(!e.length)return o.map(([e,t])=>t);let r="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return o.filter(([e])=>e===r).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,o]=1===e.length?[e[0].name,e[0].value]:e,r=this._parsed;return r.set(t,{name:t,value:o}),this._headers.set("cookie",Array.from(r).map(([e,t])=>i(t)).join("; ")),this}delete(e){let t=this._parsed,o=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>i(t)).join("; ")),o}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},h=class{constructor(e){var t,o,r;this._parsed=new Map,this._headers=e;let s=null!=(r=null!=(o=null==(t=e.getSetCookie)?void 0:t.call(e))?o:e.get("set-cookie"))?r:[];for(let e of Array.isArray(s)?s:function(e){if(!e)return[];var t,o,r,s,n,i=[],a=0;function u(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(t=a,n=!1;u();)if(","===(o=e.charAt(a))){for(r=a,a+=1,u(),s=a;a<e.length&&"="!==(o=e.charAt(a))&&";"!==o&&","!==o;)a+=1;a<e.length&&"="===e.charAt(a)?(n=!0,a=s,i.push(e.substring(t,r)),t=a):a=r+1}else a+=1;(!n||a>=e.length)&&i.push(e.substring(t,e.length))}return i}(s)){let t=u(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let o=Array.from(this._parsed.values());if(!e.length)return o;let r="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return o.filter(e=>e.name===r)}has(e){return this._parsed.has(e)}set(...e){let[t,o,r]=1===e.length?[e[0].name,e[0].value,e[0]]:e,s=this._parsed;return s.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:o,...r})),function(e,t){for(let[,o]of(t.delete("set-cookie"),e)){let e=i(o);t.append("set-cookie",e)}}(s,this._headers),this}delete(...e){let[t,o,r]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0].path,e[0].domain];return this.set({name:t,path:o,domain:r,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(i).join("; ")}}},18764:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var o in t)Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}(t,{RequestCookies:function(){return r.RequestCookies},ResponseCookies:function(){return r.ResponseCookies},stringifyCookie:function(){return r.stringifyCookie}});let r=o(21666)}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[4372,7609],()=>o(8024));module.exports=r})();