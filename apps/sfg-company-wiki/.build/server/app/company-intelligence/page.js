(()=>{var e={};e.id=6454,e.ids=[6454],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},22721:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l}),t(21337),t(70443),t(71363);var r=t(36576),a=t(72007),n=t(21818),i=t.n(n),o=t(88897),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);t.d(s,d);let l=["",{children:["company-intelligence",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,21337)),"/home/ubuntu/company_wiki/nextjs_space/app/company-intelligence/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,70443)),"/home/ubuntu/company_wiki/nextjs_space/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,71363,23)),"next/dist/client/components/not-found-error"]}],c=["/home/ubuntu/company_wiki/nextjs_space/app/company-intelligence/page.tsx"],u="/company-intelligence/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/company-intelligence/page",pathname:"/company-intelligence",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},32424:(e,s,t)=>{Promise.resolve().then(t.bind(t,27665))},68744:(e,s,t)=>{Promise.resolve().then(t.bind(t,75282))},87133:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,84114,23)),Promise.resolve().then(t.t.bind(t,28866,23)),Promise.resolve().then(t.t.bind(t,31324,23)),Promise.resolve().then(t.t.bind(t,83567,23)),Promise.resolve().then(t.t.bind(t,55996,23)),Promise.resolve().then(t.t.bind(t,10050,23))},27665:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var r=t(62901),a=t(24383),n=t(23803),i=t(250),o=t(27878),d=t(31606),l=t(84227),c=t(558),u=t(61659),m=t(21680),p=t(1320),x=t(91046),h=t(66843),f=t(39350);function g(){var e,s;let[t,g]=(0,a.useState)(""),[j,v]=(0,a.useState)([]),[y,b]=(0,a.useState)(null),[N,_]=(0,a.useState)(null),[k,w]=(0,a.useState)([]),[S,C]=(0,a.useState)(null),[P,A]=(0,a.useState)(!1),Z=async()=>{if(!t.trim()){f.Am.error("Please enter a company name or number");return}A(!0);try{let e=await fetch(`/api/companies-house/search?q=${encodeURIComponent(t)}`),s=await e.json();if(!e.ok)throw Error(s.error||"Search failed");v(s.items||[]),s.items?.length===0&&f.Am.error("No companies found")}catch(e){f.Am.error(e.message||"Failed to search companies"),console.error("Search error:",e)}finally{A(!1)}},M=async e=>{A(!0);try{let s=await fetch(`/api/companies-house/profile?number=${e}`),t=await s.json();_(t);let r=await fetch(`/api/companies-house/officers?number=${e}`),a=await r.json();w(a.items||[]);let n=await fetch(`/api/companies-house/credit-risk?number=${e}`),i=await n.json();C(i),f.Am.success("Company details loaded")}catch(e){f.Am.error("Failed to load company details"),console.error("Load error:",e)}finally{A(!1)}};return(0,r.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[r.jsx(p.Z,{className:"w-8 h-8"}),"Company Intelligence"]}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Search and analyze UK companies using Companies House data"})]})}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{children:[r.jsx(n.ll,{children:"Search Companies"}),r.jsx(n.SZ,{children:"Enter company name or registration number"})]}),(0,r.jsxs)(n.aY,{children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(i.I,{placeholder:"e.g., SFG Aluminium Ltd or 12345678",value:t,onChange:e=>g(e.target.value),onKeyDown:e=>"Enter"===e.key&&Z()}),(0,r.jsxs)(o.z,{onClick:Z,disabled:P,children:[r.jsx(x.Z,{className:"w-4 h-4 mr-2"}),"Search"]})]}),j.length>0&&(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,r.jsxs)("h3",{className:"font-semibold",children:["Search Results (",j.length,")"]}),r.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:j.map(e=>r.jsx(n.Zb,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>{b(e),M(e.company_number)},children:r.jsx(n.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-semibold",children:e.title}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Company No: ",e.company_number]}),e.address_snippet&&r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.address_snippet})]}),r.jsx(d.C,{variant:"active"===e.company_status?"default":"secondary",children:e.company_status})]})})},e.company_number))})]})]})]}),N&&(0,r.jsxs)(l.mQ,{defaultValue:"profile",className:"w-full",children:[(0,r.jsxs)(l.dr,{className:"grid w-full grid-cols-3",children:[r.jsx(l.SP,{value:"profile",children:"Company Profile"}),r.jsx(l.SP,{value:"officers",children:"Officers"}),r.jsx(l.SP,{value:"risk",children:"Credit Risk"})]}),r.jsx(l.nU,{value:"profile",className:"space-y-4",children:(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(n.ll,{className:"flex items-center gap-2",children:["active"===(e=N.company_status)?r.jsx(c.Z,{className:"w-4 h-4 text-green-500"}):"dissolved"===e?r.jsx(u.Z,{className:"w-4 h-4 text-red-500"}):r.jsx(m.Z,{className:"w-4 h-4 text-yellow-500"}),N.company_name]}),(0,r.jsxs)(n.SZ,{children:["Company No: ",N.company_number]})]}),r.jsx(d.C,{children:N.company_status})]})}),(0,r.jsxs)(n.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Type"}),r.jsx("p",{children:N.type})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Incorporated"}),r.jsx("p",{children:new Date(N.date_of_creation).toLocaleDateString()})]})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Registered Address"}),(0,r.jsxs)("div",{className:"text-sm",children:[N.registered_office_address?.address_line_1&&r.jsx("p",{children:N.registered_office_address.address_line_1}),N.registered_office_address?.address_line_2&&r.jsx("p",{children:N.registered_office_address.address_line_2}),N.registered_office_address?.locality&&r.jsx("p",{children:N.registered_office_address.locality}),N.registered_office_address?.postal_code&&r.jsx("p",{children:N.registered_office_address.postal_code})]})]}),N.sic_codes&&N.sic_codes.length>0&&(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"SIC Codes"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:N.sic_codes.map(e=>r.jsx(d.C,{variant:"outline",children:e},e))})]}),N.accounts&&(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[N.accounts.next_due&&(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Next Accounts Due"}),r.jsx("p",{children:new Date(N.accounts.next_due).toLocaleDateString()})]}),N.accounts.last_made_up_to&&(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Last Accounts"}),r.jsx("p",{children:new Date(N.accounts.last_made_up_to).toLocaleDateString()})]})]})]})]})}),r.jsx(l.nU,{value:"officers",className:"space-y-4",children:(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center gap-2",children:[r.jsx(h.Z,{className:"w-5 h-5"}),"Company Officers (",k.length,")"]})}),r.jsx(n.aY,{children:r.jsx("div",{className:"space-y-4",children:k.map((e,s)=>r.jsx("div",{className:"border-b pb-4 last:border-0",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-semibold",children:e.name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:e.officer_role}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Appointed: ",new Date(e.appointed_on).toLocaleDateString()]}),e.resigned_on&&(0,r.jsxs)("p",{className:"text-sm text-red-600",children:["Resigned: ",new Date(e.resigned_on).toLocaleDateString()]})]}),!e.resigned_on&&r.jsx(d.C,{children:"Active"})]})},s))})})]})}),r.jsx(l.nU,{value:"risk",className:"space-y-4",children:S&&(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center gap-2",children:[r.jsx(m.Z,{className:"w-5 h-5"}),"Credit Risk Assessment"]})}),(0,r.jsxs)(n.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[S.score,"/100"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Credit Score"})]}),(s=S.risk_level,(0,r.jsxs)(d.C,{variant:{LOW:"default",MEDIUM:"secondary",HIGH:"destructive",CRITICAL:"destructive"}[s]||"default",children:[s," RISK"]}))]}),S.factors&&S.factors.length>0&&(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Risk Factors"}),r.jsx("ul",{className:"space-y-2",children:S.factors.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[r.jsx(m.Z,{className:"w-4 h-4 text-yellow-500 mt-0.5"}),r.jsx("span",{className:"text-sm",children:e})]},s))})]}),r.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:(0,r.jsxs)("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:[r.jsx("strong",{children:"Note:"})," This is an automated assessment based on Companies House data. For comprehensive credit decisions, please conduct additional due diligence."]})})]})]})})]})]})}},75282:(e,s,t)=>{"use strict";t.d(s,{Providers:()=>u});var r,a=t(62901),n=t(84700);t(24383);var i=t(69878);function o({children:e,...s}){return a.jsx(i.f,{...s,children:e})}var d=t(43921);let l=({...e})=>{let{theme:s="system"}=(0,i.F)();return a.jsx(d.x7,{theme:s,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};function c({children:e,className:s=""}){let{data:t}=(0,n.useSession)()||{},i=(()=>{if(!t?.user)return"sales";let e=t.user.tierLevel;return e===r.CEO||"SUPER_ADMIN"===t.user.role?"ceo":e===r.FINANCE||"ADMIN"===t.user.role?"finance":"sales"})();return a.jsx("div",{"data-tier":i,className:s,children:e})}function u({children:e}){return a.jsx(n.SessionProvider,{children:a.jsx(o,{attribute:"class",defaultTheme:"dark",enableSystem:!1,disableTransitionOnChange:!0,children:(0,a.jsxs)(c,{children:[e,a.jsx(l,{position:"top-right"})]})})})}!function(e){e.CEO="CEO",e.FINANCE="FINANCE",e.SALES="SALES"}(r||(r={}))},31606:(e,s,t)=>{"use strict";t.d(s,{C:()=>o});var r=t(62901);t(24383);var a=t(47279),n=t(68637);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:s,...t}){return r.jsx("div",{className:(0,n.cn)(i({variant:s}),e),...t})}},27878:(e,s,t)=>{"use strict";t.d(s,{z:()=>l});var r=t(62901),a=t(24383),n=t(42049),i=t(47279),o=t(68637);let d=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef(({className:e,variant:s,size:t,asChild:a=!1,...i},l)=>{let c=a?n.g7:"button";return r.jsx(c,{className:(0,o.cn)(d({variant:s,size:t,className:e})),ref:l,...i})});l.displayName="Button"},250:(e,s,t)=>{"use strict";t.d(s,{I:()=>i});var r=t(62901),a=t(24383),n=t(68637);let i=a.forwardRef(({className:e,type:s,...t},a)=>r.jsx("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));i.displayName="Input"},68637:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var r=t(84330),a=t(77189);function n(...e){return(0,a.m6)((0,r.W)(e))}},1320:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(71945).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},558:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(71945).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},61659:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(71945).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},91046:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(71945).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},21680:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(71945).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},66843:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(71945).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},21337:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(88895).createProxy)(String.raw`/home/ubuntu/company_wiki/nextjs_space/app/company-intelligence/page.tsx#default`)},70443:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d,metadata:()=>o});var r=t(83537),a=t(57416),n=t.n(a);t(26148);let i=(0,t(88895).createProxy)(String.raw`/home/ubuntu/company_wiki/nextjs_space/components/providers.tsx#Providers`),o={title:"SFG Aluminium Wiki - Knowledge Management System",description:"Comprehensive company knowledge management, operational procedures, and RAG-enabled wiki system for SFG Aluminium",icons:{icon:"/favicon.svg",shortcut:"/favicon.svg"}};function d({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:n().className,children:r.jsx(i,{children:e})})})}},26148:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[4372,302,1263,1813,7486],()=>t(22721));module.exports=r})();