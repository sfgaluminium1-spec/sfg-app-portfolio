(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{4133:function(e,r,s){Promise.resolve().then(s.bind(s,3836))},3836:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return b}});var l=s(5444),a=s(9300),i=s(9047),t=s(9827),n=s(2422),c=s(4678),o=s(4635),d=s(7012),h=s(489),u=s(8155),m=s(6772);let j=(0,s(2154).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var x=s(1084),p=s(5287),v=s(6948);function b(){let e=(0,i.useRouter)(),[r,s]=(0,a.useState)(!1),[b,y]=(0,a.useState)(""),[g,N]=(0,a.useState)({customer:"",project:"",location:"",productType:"",deliveryType:"",customerOrderNumber:"",enquiryInitialCount:"",notes:"",priority:"MEDIUM"}),f=async r=>{r.preventDefault(),s(!0),y("");try{let r=await fetch("/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to create project")}let s=await r.json();e.push(`/dashboard/projects/${s.id}`)}catch(e){y(e.message)}finally{s(!1)}},w=(e,r)=>{N(s=>({...s,[e]:r}))};return(0,l.jsxs)("div",{className:"container mx-auto p-6 max-w-4xl",children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)(x.default,{href:"/dashboard/projects",children:(0,l.jsxs)(n.z,{variant:"ghost",className:"mb-4",children:[(0,l.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Back to Projects"]})}),(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Project"}),(0,l.jsx)("p",{className:"text-gray-600 mt-1",children:"A unique BaseNumber will be automatically allocated"})]}),b&&(0,l.jsxs)(v.bZ,{variant:"destructive",className:"mb-6",children:[(0,l.jsx)(m.Z,{className:"h-4 w-4"}),(0,l.jsx)(v.X,{children:b})]}),(0,l.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,l.jsxs)(t.Zb,{className:"bg-white/60 backdrop-blur-sm border-gray-200/50",children:[(0,l.jsxs)(t.Ol,{children:[(0,l.jsx)(t.ll,{children:"Required Fields"}),(0,l.jsx)(t.SZ,{children:"All fields are required for ENQ â†’ QUO progression"})]}),(0,l.jsxs)(t.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(o._,{htmlFor:"customer",children:"Customer Name *"}),(0,l.jsx)(c.I,{id:"customer",value:g.customer,onChange:e=>w("customer",e.target.value),placeholder:"Company or individual name",className:"bg-white/80"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o._,{htmlFor:"project",children:"Project Name *"}),(0,l.jsx)(c.I,{id:"project",value:g.project,onChange:e=>w("project",e.target.value),placeholder:"e.g., Office Refurbishment",className:"bg-white/80"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o._,{htmlFor:"location",children:"Location *"}),(0,l.jsx)(c.I,{id:"location",value:g.location,onChange:e=>w("location",e.target.value),placeholder:"e.g., London, Birmingham",className:"bg-white/80"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o._,{htmlFor:"productType",children:"Product Type *"}),(0,l.jsxs)(h.Ph,{value:g.productType,onValueChange:e=>w("productType",e),children:[(0,l.jsx)(h.i4,{className:"bg-white/80",children:(0,l.jsx)(h.ki,{placeholder:"Select product type"})}),(0,l.jsx)(h.Bw,{children:p.nB.PRODUCT_TYPES.map(e=>(0,l.jsx)(h.Ql,{value:e,children:e},e))})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o._,{htmlFor:"deliveryType",children:"Delivery Type *"}),(0,l.jsxs)(h.Ph,{value:g.deliveryType,onValueChange:e=>w("deliveryType",e),children:[(0,l.jsx)(h.i4,{className:"bg-white/80",children:(0,l.jsx)(h.ki,{placeholder:"Select delivery type"})}),(0,l.jsx)(h.Bw,{children:p.nB.DELIVERY_TYPES.map(e=>(0,l.jsx)(h.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o._,{htmlFor:"enquiryInitialCount",children:"Initial Product Count *"}),(0,l.jsx)(c.I,{id:"enquiryInitialCount",type:"number",min:"0",value:g.enquiryInitialCount,onChange:e=>w("enquiryInitialCount",e.target.value),placeholder:"Number of products in enquiry",className:"bg-white/80"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Count only complete deliverables with their own price"})]})]})]}),(0,l.jsxs)(t.Zb,{className:"bg-white/60 backdrop-blur-sm border-gray-200/50",children:[(0,l.jsxs)(t.Ol,{children:[(0,l.jsx)(t.ll,{children:"Additional Information"}),(0,l.jsx)(t.SZ,{children:"Optional fields"})]}),(0,l.jsxs)(t.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(o._,{htmlFor:"customerOrderNumber",children:"Customer Order Number"}),(0,l.jsx)(c.I,{id:"customerOrderNumber",value:g.customerOrderNumber,onChange:e=>w("customerOrderNumber",e.target.value),placeholder:"Optional",className:"bg-white/80"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o._,{htmlFor:"priority",children:"Priority"}),(0,l.jsxs)(h.Ph,{value:g.priority,onValueChange:e=>w("priority",e),children:[(0,l.jsx)(h.i4,{className:"bg-white/80",children:(0,l.jsx)(h.ki,{})}),(0,l.jsxs)(h.Bw,{children:[(0,l.jsx)(h.Ql,{value:"LOW",children:"Low"}),(0,l.jsx)(h.Ql,{value:"MEDIUM",children:"Medium"}),(0,l.jsx)(h.Ql,{value:"HIGH",children:"High"}),(0,l.jsx)(h.Ql,{value:"CRITICAL",children:"Critical"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o._,{htmlFor:"notes",children:"Notes"}),(0,l.jsx)(d.g,{id:"notes",value:g.notes,onChange:e=>w("notes",e.target.value),placeholder:"Additional notes about this enquiry",rows:4,className:"bg-white/80"})]})]})]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)(x.default,{href:"/dashboard/projects",className:"flex-1",children:(0,l.jsx)(n.z,{type:"button",variant:"outline",className:"w-full",children:"Cancel"})}),(0,l.jsx)(n.z,{type:"submit",disabled:r,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:r?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j,{className:"h-4 w-4 mr-2"}),"Create Project"]})})]})]})]})}}},function(e){e.O(0,[6730,5558,9727,1666,6441,2386,7156,1744],function(){return e(e.s=4133)}),_N_E=e.O()}]);