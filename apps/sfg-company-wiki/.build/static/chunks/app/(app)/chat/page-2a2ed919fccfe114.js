(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2307],{3091:function(e,r,s){Promise.resolve().then(s.bind(s,1115))},1115:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return j}});var t=s(5444),a=s(9300),n=s(2422),i=s(4678),l=s(9827),o=s(1489),c=s(1335),d=s(199),u=s(2154);let f=(0,u.Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var x=s(6771),h=s(4693),m=s(1946);let p=(0,u.Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),g=(0,u.Z)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);var y=s(5076);let b=["What are the staff tier levels and their authorities?","How do we calculate customer tier discounts?","What is the credit check approval process?","How are overtime hours calculated?","What are the margin requirements for new products?","How do we handle payroll deductions?"];function j(){let[e,r]=(0,a.useState)([]),[s,u]=(0,a.useState)(""),[j,v]=(0,a.useState)(!1),N=(0,a.useRef)(null),w=()=>{if(N.current){let e=N.current.querySelector("[data-radix-scroll-area-viewport]");e&&(e.scrollTop=e.scrollHeight)}};(0,a.useEffect)(()=>{w()},[e]);let k=async e=>{let t=e||s.trim();if(!t||j)return;let a={id:Date.now().toString(),role:"USER",content:t};r(e=>[...e,a]),u(""),v(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,sessionId:null})});if(!e.ok)throw Error("Failed to get response");let s=e.body?.getReader(),a=new TextDecoder,n={id:(Date.now()+1).toString(),role:"ASSISTANT",content:""};if(r(e=>[...e,n]),s)for(;;){let{done:e,value:t}=await s.read();if(e)break;for(let e of a.decode(t).split("\n"))if(e.startsWith("data: ")){let s=e.slice(6);if("[DONE]"===s)break;try{let e=JSON.parse(s),t=e.choices?.[0]?.delta?.content||"";t&&(n.content+=t,r(e=>e.map(e=>e.id===n.id?{...e,content:n.content}:e)))}catch(e){}}}}catch(s){console.error("Error sending message:",s);let e={id:(Date.now()+1).toString(),role:"ASSISTANT",content:"Sorry, I encountered an error while processing your request. Please try again."};r(r=>[...r,e])}finally{v(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[(0,t.jsx)(d.Z,{className:"h-8 w-8"}),"AI Assistant"]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Ask questions about company procedures, policies, and processes"})]}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-4",children:[(0,t.jsx)("div",{className:"lg:col-span-3",children:(0,t.jsxs)(l.Zb,{className:"h-[600px] flex flex-col",children:[(0,t.jsxs)(l.Ol,{children:[(0,t.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(f,{className:"h-5 w-5"}),"Company Knowledge Assistant"]}),(0,t.jsx)(l.SZ,{children:"I can help you find information about company procedures, policies, and processes"})]}),(0,t.jsxs)(l.aY,{className:"flex-1 flex flex-col p-0",children:[(0,t.jsx)(o.x,{ref:N,className:"flex-1 p-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[0===e.length&&(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(f,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"font-medium mb-2",children:"Welcome to the Knowledge Assistant"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Ask me anything about your company procedures and policies."})]}),e.map(e=>(0,t.jsxs)("div",{className:`flex gap-3 ${"USER"===e.role?"justify-end":"justify-start"}`,children:["ASSISTANT"===e.role&&(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center shrink-0",children:(0,t.jsx)(f,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:`max-w-[80%] rounded-lg px-4 py-2 ${"USER"===e.role?"bg-primary text-primary-foreground":"bg-muted"}`,children:[(0,t.jsx)("div",{className:"whitespace-pre-wrap",children:e.content}),e.metadata?.sources&&e.metadata.sources.length>0&&(0,t.jsxs)("div",{className:"mt-2 pt-2 border-t border-border/50",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Sources:"}),(0,t.jsx)("div",{className:"space-y-1",children:e.metadata.sources.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(x.Z,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"text-xs",children:e.title}),(0,t.jsx)(c.C,{variant:"outline",className:"text-xs",children:e.category})]},r))})]})]}),"USER"===e.role&&(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-secondary text-secondary-foreground flex items-center justify-center shrink-0",children:(0,t.jsx)(h.Z,{className:"h-4 w-4"})})]},e.id)),j&&(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center shrink-0",children:(0,t.jsx)(f,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:"bg-muted rounded-lg px-4 py-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 animate-spin"}),(0,t.jsx)("span",{children:"Thinking..."})]})})]})]})}),(0,t.jsx)("div",{className:"p-4 border-t",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.I,{placeholder:"Ask about company procedures, policies, or processes...",value:s,onChange:e=>u(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),k())},disabled:j}),(0,t.jsx)(n.z,{onClick:()=>k(),disabled:!s.trim()||j,size:"icon",children:(0,t.jsx)(p,{className:"h-4 w-4"})})]})})]})]})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{children:[(0,t.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(g,{className:"h-5 w-5"}),"Suggested Questions"]}),(0,t.jsx)(l.SZ,{children:"Try asking about these topics"})]}),(0,t.jsx)(l.aY,{className:"space-y-2",children:b.map((e,r)=>(0,t.jsxs)(n.z,{variant:"outline",size:"sm",className:"w-full text-left justify-start h-auto p-3",onClick:()=>k(e),disabled:j,children:[(0,t.jsx)(y.Z,{className:"h-3 w-3 mr-2 shrink-0"}),(0,t.jsx)("span",{className:"text-xs",children:e})]},r))})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsx)(l.ll,{children:"Tips for Better Results"})}),(0,t.jsxs)(l.aY,{className:"space-y-3 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Be specific:"})," Ask about particular procedures or policies"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Use keywords:"})," Mention departments, roles, or process names"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Ask follow-ups:"})," Request clarification or more details"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Reference conflicts:"})," Ask about inconsistencies between procedures"]})]})]})]})]})]})}},1335:function(e,r,s){"use strict";s.d(r,{C:function(){return l}});var t=s(5444);s(9300);var a=s(2371),n=s(5522);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:r,...s}){return(0,t.jsx)("div",{className:(0,n.cn)(i({variant:r}),e),...s})}},2422:function(e,r,s){"use strict";s.d(r,{z:function(){return c}});var t=s(5444),a=s(9300),n=s(223),i=s(2371),l=s(5522);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:r,size:s,asChild:a=!1,...i},c)=>{let d=a?n.g7:"button";return(0,t.jsx)(d,{className:(0,l.cn)(o({variant:r,size:s,className:e})),ref:c,...i})});c.displayName="Button"},9827:function(e,r,s){"use strict";s.d(r,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return o}});var t=s(5444),a=s(9300),n=s(5522);let i=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));i.displayName="Card";let l=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...r}));l.displayName="CardHeader";let o=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));o.displayName="CardTitle";let c=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...r}));c.displayName="CardDescription";let d=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...r}));d.displayName="CardContent";let u=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...r}));u.displayName="CardFooter"},4678:function(e,r,s){"use strict";s.d(r,{I:function(){return i}});var t=s(5444),a=s(9300),n=s(5522);let i=a.forwardRef(({className:e,type:r,...s},a)=>(0,t.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));i.displayName="Input"},1489:function(e,r,s){"use strict";s.d(r,{x:function(){return l}});var t=s(5444),a=s(9300),n=s(4712),i=s(5522);let l=a.forwardRef(({className:e,children:r,...s},a)=>(0,t.jsxs)(n.fC,{ref:a,className:(0,i.cn)("relative overflow-hidden",e),...s,children:[(0,t.jsx)(n.l_,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(o,{}),(0,t.jsx)(n.Ns,{})]}));l.displayName=n.fC.displayName;let o=a.forwardRef(({className:e,orientation:r="vertical",...s},a)=>(0,t.jsx)(n.gb,{ref:a,orientation:r,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...s,children:(0,t.jsx)(n.q4,{className:"relative flex-1 rounded-full bg-border"})}));o.displayName=n.gb.displayName},5522:function(e,r,s){"use strict";s.d(r,{cn:function(){return n}});var t=s(2191),a=s(3607);function n(...e){return(0,a.m6)((0,t.W)(e))}},1946:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(2154).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}},function(e){e.O(0,[6730,7895,2386,7156,1744],function(){return e(e.s=3091)}),_N_E=e.O()}]);