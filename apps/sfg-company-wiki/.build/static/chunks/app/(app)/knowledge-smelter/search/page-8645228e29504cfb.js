(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[714],{131:function(e,r,t){Promise.resolve().then(t.bind(t,5175))},5175:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return p}});var s=t(5444),n=t(9300),a=t(9827),i=t(2422),l=t(4678),o=t(1335),c=t(5076),d=t(1946),u=t(8699),f=t(6771),m=t(6584),x=t(3394),h=t(1585);function p(){let[e,r]=(0,n.useState)(""),[t,p]=(0,n.useState)([]),[g,v]=(0,n.useState)(!1),[b,y]=(0,n.useState)(null),j=async(r=1)=>{if(!e.trim()){h.Am.error("Please enter a search query");return}v(!0);try{let t=new URLSearchParams({q:e,page:r.toString(),limit:"20"}),s=await fetch(`/api/knowledge-smelter/search?${t}`),n=await s.json();p(n.files),y(n.pagination)}catch(e){console.error("Search error:",e),h.Am.error("Search failed")}finally{v(!1)}};return(0,s.jsxs)("div",{className:"p-8 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Search Archive"}),(0,s.jsxs)("p",{className:"text-muted-foreground",children:["Search through ",b?.total||0," archived files"]})]}),(0,s.jsx)(a.Zb,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,s.jsx)(l.I,{value:e,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"===e.key&&j()},placeholder:"Search by filename, job number, customer name, or content...",className:"pl-10"})]}),(0,s.jsxs)(i.z,{onClick:()=>j(),disabled:g,children:[g?(0,s.jsx)(d.Z,{className:"h-4 w-4 mr-2 animate-spin"}):(0,s.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Search"]}),(0,s.jsxs)(i.z,{variant:"outline",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Filters"]})]})}),t.length>0&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",t.length," of ",b?.total," results"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>j(b.page-1),disabled:1===b.page||g,children:"Previous"}),(0,s.jsxs)("span",{className:"text-sm",children:["Page ",b.page," of ",b.pages]}),(0,s.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>j(b.page+1),disabled:b.page===b.pages||g,children:"Next"})]})]}),t.map(e=>(0,s.jsx)(a.Zb,{className:"p-6 hover:bg-accent transition-colors",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsx)(f.Z,{className:"h-5 w-5 text-muted-foreground"}),(0,s.jsx)("h3",{className:"text-lg font-semibold",children:e.fileName}),(0,s.jsx)(o.C,{children:e.fileType}),(0,s.jsxs)(o.C,{variant:"outline",children:[e.confidence,"% confident"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-muted-foreground mb-4",children:[e.jobNumber&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Job:"})," ",e.jobNumber]}),e.customerName&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Customer:"})," ",e.customerName]}),e.productType&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Product:"})," ",e.productType]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Size:"})," ",(Number(e.fileSize)/1024/1024).toFixed(2)," MB"]})]}),e.tags&&e.tags.length>0&&(0,s.jsxs)("div",{className:"flex items-center flex-wrap gap-2",children:[e.tags.slice(0,5).map(e=>(0,s.jsxs)(o.C,{variant:"secondary",className:"text-xs",children:[e.key,": ",e.value]},e.id)),e.tags.length>5&&(0,s.jsxs)(o.C,{variant:"outline",className:"text-xs",children:["+",e.tags.length-5," more"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(i.z,{variant:"outline",size:"sm",children:(0,s.jsx)(m.Z,{className:"h-4 w-4"})}),e.sharePointUrl&&(0,s.jsx)(i.z,{variant:"outline",size:"sm",asChild:!0,children:(0,s.jsx)("a",{href:e.sharePointUrl,target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)(x.Z,{className:"h-4 w-4"})})})]})]})},e.id))]}),!g&&0===t.length&&e&&(0,s.jsx)(a.Zb,{className:"p-12",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(c.Z,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Results Found"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Try adjusting your search query or filters"})]})}),!g&&0===t.length&&!e&&(0,s.jsx)(a.Zb,{className:"p-12",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(c.Z,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Search the Archive"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Enter a search query above to find files by name, job number, customer, or content"})]})})]})}},1335:function(e,r,t){"use strict";t.d(r,{C:function(){return l}});var s=t(5444);t(9300);var n=t(2371),a=t(5522);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:r,...t}){return(0,s.jsx)("div",{className:(0,a.cn)(i({variant:r}),e),...t})}},2422:function(e,r,t){"use strict";t.d(r,{z:function(){return c}});var s=t(5444),n=t(9300),a=t(223),i=t(2371),l=t(5522);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef(({className:e,variant:r,size:t,asChild:n=!1,...i},c)=>{let d=n?a.g7:"button";return(0,s.jsx)(d,{className:(0,l.cn)(o({variant:r,size:t,className:e})),ref:c,...i})});c.displayName="Button"},9827:function(e,r,t){"use strict";t.d(r,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return o}});var s=t(5444),n=t(9300),a=t(5522);let i=n.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));i.displayName="Card";let l=n.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...r}));l.displayName="CardHeader";let o=n.forwardRef(({className:e,...r},t)=>(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));o.displayName="CardTitle";let c=n.forwardRef(({className:e,...r},t)=>(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",e),...r}));c.displayName="CardDescription";let d=n.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",e),...r}));d.displayName="CardContent";let u=n.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",e),...r}));u.displayName="CardFooter"},4678:function(e,r,t){"use strict";t.d(r,{I:function(){return i}});var s=t(5444),n=t(9300),a=t(5522);let i=n.forwardRef(({className:e,type:r,...t},n)=>(0,s.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));i.displayName="Input"},5522:function(e,r,t){"use strict";t.d(r,{cn:function(){return a}});var s=t(2191),n=t(3607);function a(...e){return(0,n.m6)((0,s.W)(e))}},6584:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(2154).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},3394:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(2154).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},6771:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(2154).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},8699:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(2154).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},1946:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(2154).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5076:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(2154).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},2371:function(e,r,t){"use strict";t.d(r,{j:function(){return a}});let s=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,n=function(){for(var e,r,t=0,s="";t<arguments.length;)(e=arguments[t++])&&(r=function e(r){var t,s,n="";if("string"==typeof r||"number"==typeof r)n+=r;else if("object"==typeof r){if(Array.isArray(r))for(t=0;t<r.length;t++)r[t]&&(s=e(r[t]))&&(n&&(n+=" "),n+=s);else for(t in r)r[t]&&(n&&(n+=" "),n+=t)}return n}(e))&&(s&&(s+=" "),s+=r);return s},a=(e,r)=>t=>{var a;if((null==r?void 0:r.variants)==null)return n(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:i,defaultVariants:l}=r,o=Object.keys(i).map(e=>{let r=null==t?void 0:t[e],n=null==l?void 0:l[e];if(null===r)return null;let a=s(r)||s(n);return i[e][a]}),c=t&&Object.entries(t).reduce((e,r)=>{let[t,s]=r;return void 0===s||(e[t]=s),e},{});return n(e,o,null==r?void 0:null===(a=r.compoundVariants)||void 0===a?void 0:a.reduce((e,r)=>{let{class:t,className:s,...n}=r;return Object.entries(n).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...l,...c}[r]):({...l,...c})[r]===t})?[...e,t,s]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}}},function(e){e.O(0,[6730,1585,2386,7156,1744],function(){return e(e.s=131)}),_N_E=e.O()}]);